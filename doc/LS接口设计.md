[TOC]

# 接口设计



## 创建用户

描述：第一次登录成功后创建，包括qq号，昵称以及头像。创建后信息不能修改

### 请求

POST /api/user

| 字段名    | 类型 | 备注           |
| --------- | ---- | -------------- |
| qq_number |      | qq号           |
| name      |      | 昵称，可以重复 |
| pic       |      | 头像           |

### 响应

| 字段名   | 类型 | 备注              |
| -------- | ---- | ----------------- |
| ret_code |      | 0. 成功； 1. 失败 |



## 发布心情

### 请求

POST  /api/emotion

| 字段名      | 类型 | 备注                     |
| ----------- | ---- | ------------------------ |
| content     |      | 心情内容，为空时不能评论 |
| label       |      | 心情标签                 |
| strong      |      | 强度                     |
| create_time |      | 创建时间                 |
| visable     |      | 1. 个人可见；2. 社区可见 |
| poster      |      | 发布人qq号               |

### 响应

| 字段名   | 类型 | 备注              |
| -------- | ---- | ----------------- |
| ret_code |      | 0. 成功； 1. 失败 |





## 查看用户心情

### 请求

GET  /api/emotion/{qq_number}

| 字段名    | 类型 | 备注 |
| --------- | ---- | ---- |
| qq_number |      |      |

### 响应

| 字段名       | 类型 | 备注              |
| ------------ | ---- | ----------------- |
| ret_code     |      | 0. 成功； 1. 失败 |
| emotion_list |      |                   |

emotion_list:

| 字段名      | 类型 | 备注                     |
| ----------- | ---- | ------------------------ |
| content     |      | 心情内容。为空时不能评论 |
| label       |      | 心情标签                 |
| strong      |      | 强度                     |
| create_time |      | 创建时间                 |
| poster      |      | 发布人qq号               |
| like_cnt    |      | 点赞数                   |
| comment_cnt |      | 评论数                   |

## 查看所有心情

### 请求

GET  /api/emotion



### 响应

| 字段名       | 类型 | 备注              |
| ------------ | ---- | ----------------- |
| ret_code     |      | 0. 成功； 1. 失败 |
| emotion_list |      |                   |

emotion_list:

| 字段名      | 类型 | 备注                     |
| ----------- | ---- | ------------------------ |
| content     |      | 心情内容。为空时不能评论 |
| label       |      | 心情标签                 |
| strong      |      | 强度                     |
| create_time |      | 创建时间                 |
| poster      |      | 发布人qq号               |
| like_cnt    |      | 点赞数                   |
| comment_cnt |      | 评论数                   |



 ## 查询所有指定标签心情

### 请求

GET  /api/getEmotionByLabel

| 字段名 | 类型 | 备注     |
| ------ | ---- | -------- |
| label  |      | 心情标签 |

### 响应

| 字段名       | 类型 | 备注              |
| ------------ | ---- | ----------------- |
| ret_code     |      | 0. 成功； 1. 失败 |
| emotion_list |      |                   |

emotion_list:

| 字段名      | 类型 | 备注                     |
| ----------- | ---- | ------------------------ |
| content     |      | 心情内容。为空时不能评论 |
| label       |      | 心情标签                 |
| strong      |      | 强度                     |
| create_time |      | 创建时间                 |
| poster      |      | 发布人qq号               |
| like_cnt    |      | 点赞数                   |
| comment_cnt |      | 评论数                   |



## 发布评论

### 请求

POST /api/comment

| 字段名      | 类型 | 备注                              |
| ----------- | ---- | --------------------------------- |
| emotion_id  |      | 心情ID                            |
| comment     |      | 评论内容                          |
| poster      |      | 发布人qq号                        |
| create_time |      | 时间                              |
| rspto       |      | 回复人qq号，为0时表示不回复指定人 |

### 响应

| 字段名   | 类型 | 备注              |
| -------- | ---- | ----------------- |
| ret_code |      | 0. 成功； 1. 失败 |

## 查看心情下的评论

### 请求

GET /api/getCommentByEmotionID

| 字段名     | 类型 | 备注   |
| ---------- | ---- | ------ |
| emotion_id |      | 心情ID |

### 响应

| 字段名       | 类型 | 备注              |
| ------------ | ---- | ----------------- |
| ret_code     |      | 0. 成功； 1. 失败 |
| comment_list |      |                   |

comment_list:

| 字段名      | 类型 | 备注                              |
| ----------- | ---- | --------------------------------- |
| emotion_id  |      | 心情ID                            |
| comment     |      | 评论内容                          |
| poster      |      | 发布人qq号                        |
| create_time |      | 时间                              |
| rspto       |      | 回复人qq号，为0时表示不回复指定人 |



## 查看用户心情下的点赞

## 发布点赞

### 请求

| 字段名      | 类型 | 备注       |
| ----------- | ---- | ---------- |
| emotion_id  |      | 心情id     |
| poster      |      | 发布人qq号 |
| create_time |      | 时间       |

### 响应

| 字段名   | 类型 | 备注              |
| -------- | ---- | ----------------- |
| ret_code |      | 0. 成功； 1. 失败 |

## 查看动态

>  动态：别人对自己的评论和点赞



## 表情识别

通过优图接口实现